# Bot for click on site. version 1.0

## Описание
Алгоритм для авторизации на сайте **Bitrix24** и далее реализации логики на самом сайте, как автоматизация процесса входа после того как сотрудник пришел на рабочее место.
На сайте происходит вход в учетную запись пользователя, далее одно из ниже описанных действий.

### Реализация одного из условий:
1) Перерыв
2) Продолжить
3) Начать рабочий день
4) Закончить рабочий день

### Основные действия
1) Запуск webdriver
2) Открытие сайта
3) Авторизация
4) Дальнейшие действия на сайте

<hr>

## Pro-code
Действия с сайтом прописаны в <code>/module/[name site]/func_action.py</code>.

Для каждого сайта формируется файл с объектом основных настроек для авторизации, например, для gitlab имеется вид: <code>modules/gitlab/data.py</code>.

Из этих файлов <code> data.py</code> импортируются настройки в общий файл <code>auth/data.py</code>.

Старт приложения осуществляется с помощью запуска скрипта <code>main.py</code>.

Для удобства написан написан bash скрипт для CRON - <code>auth.sh</code>.

### Про условия в action для bitrix24
Условий работы всего 4: **перерыв** / **продолжить** и **начать рабочий день** / **закончить рабочий день**.

#### Реализация условий
Условия зависят от заданного времени. Время задано в файле - <code>variables/time.py</code>.

#### Переменные времени:
1) **time_start_work** - начало рабочего дня
2) **time_end_work** - окончание рабочего дня
3) **time_start_dinner_break** - перерыв
4) **time_end_dinner_break** - продолжить

<blockquote>
  По дефолту заданы следующие значения:
    <ul>
        <li>Начать рабочий день - 09:00</li>
        <li>Закончить рабочий день - 18:00</li>
        <li>Перерыв - с 13 до 14</li>
        <li>Продолжить - с 14 до 18</li>
    </ul>
</blockquote>

Условия работают так (на примере дефолтных значений переменных):
  - если время от 9 до 13 часов, то рабочий день начнется
  - если время от 13 до 14, то будет перерыв рабочего дня
  - если время от 14 до 18, то будет продолжение рабочего дня
  - если время от 18, то будет завершение рабочего дня

Данные условия по времени нужны чтобы однозначно понимать отрезок времени для конкретного действия
Т.к. планируется подключение скрипта к CRON (пример в файле **cron_example**), чтобы все было в автоматическом режиме. 

<hr>

## Использование
1) Клонировать проект
2) Настроить данные для пользователя в файле data.py для модуля работы с bitrix24
3) Выставить условия времени, если необходимо в файле time.py
4) Прописать на машине в своем файле для CRON команды по примеру из файла cron_example
5) Протестировать старт и работу скрипта запуском из консоли в **корне репозитория** командой `source auth.sh`

<hr>

## Библиотека
1) Selenium

## Проблемы
### Блокировка экрана
<blockquote>
    <p>Актуальная проблема с блокировкой экрана ПК, из-за которой CRON не запускает на устройстве скрипт!</p>
</blockquote>

### Привязка к работающему ПК
<blockquote>
    <p>Т.к. использование подразумевается совместно с CRON то нужно чтобы машина на которой имеется скрипт не завершала свою работу.</p>
</blockquote>

### Привязка к WebDriver в Selenium
<blockquote>
    <p>Успешная работа скрипта подразумевает эмуляцию реальных нажатий по кнопкам и тд.</p>
    <p>Проблема в том что не удастся выполнять скрипт там где нет предустановленного драйвера WebDriver для любого из существующих браузеров.</p>
</blockquote>

#### Решение
<blockquote>
    <p>Обе проблемы реПовлечет перенос кода на сервер и перепись кода под библиотеку не использующую браузер.</p>
</blockquote>

<hr>